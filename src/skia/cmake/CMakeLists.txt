# Generated by gn_to_cmake.py.
cmake_minimum_required(VERSION 2.8.8 FATAL_ERROR)
cmake_policy(VERSION 2.8.8)
project(Skia)

option(ENABLE_SKOTTIE "Enable skottie." OFF)
option(ENABLE_VIEWER "Enable viewer." OFF)
option(ENABLE_EDITOR "Enable editor." OFF)
option(ENABLE_SKQP "Enable skqp." OFF)
#//:executable
option(ENABLE_EXECUTABLE "Enable executable." OFF)
#//:gpu_tool_utils
option(ENABLE_PDF "Enable pdf." OFF)
option(ENABLE_RAW "Enable raw." OFF)
option(ENABLE_SFNTLY "Enable sfntly." OFF)
option(ENABLE_BENCH "Enable bench." OFF)
option(ENABLE_ICU "Enable icu." OFF)
option(ENABLE_SAMPLES "Enable samples." OFF)
option(ENABLE_TEST "Enable test." OFF)

set(SRC_SKIA ${CMAKE_CURRENT_SOURCE_DIR}/../)

# Detect CPU type and whether we're building 64-bit or 32-bit code
math(EXPR BITS "${CMAKE_SIZEOF_VOID_P} * 8")
string(TOLOWER ${CMAKE_SYSTEM_PROCESSOR} CMAKE_SYSTEM_PROCESSOR_LC)
if(CMAKE_SYSTEM_PROCESSOR_LC MATCHES "x86_64" OR
        CMAKE_SYSTEM_PROCESSOR_LC MATCHES "amd64" OR
        CMAKE_SYSTEM_PROCESSOR_LC MATCHES "i[0-9]86" OR
        CMAKE_SYSTEM_PROCESSOR_LC MATCHES "x86" OR
        CMAKE_SYSTEM_PROCESSOR_LC MATCHES "ia32")
  if(BITS EQUAL 64)
    set(CPU_TYPE x86_64)
  else()
    set(CPU_TYPE i386)
  endif()
  if(NOT CMAKE_SYSTEM_PROCESSOR STREQUAL ${CPU_TYPE})
    set(CMAKE_SYSTEM_PROCESSOR ${CPU_TYPE})
  endif()
elseif(CMAKE_SYSTEM_PROCESSOR_LC STREQUAL "aarch64" OR
        CMAKE_SYSTEM_PROCESSOR_LC MATCHES "arm*64*")
  set(CPU_TYPE arm64)
elseif(CMAKE_SYSTEM_PROCESSOR_LC MATCHES "arm*")
  set(CPU_TYPE arm)
elseif(CMAKE_SYSTEM_PROCESSOR_LC MATCHES "ppc*" OR
        CMAKE_SYSTEM_PROCESSOR_LC MATCHES "powerpc*")
  set(CPU_TYPE powerpc)
else()
  set(CPU_TYPE ${CMAKE_SYSTEM_PROCESSOR_LC})
endif()
message(STATUS "${BITS}-bit build (${CPU_TYPE})")

file(WRITE "${SRC_SKIA}/cmake/empty.cpp")
execute_process(COMMAND
  ninja -C "${SRC_SKIA}/cmake/" build.ninja
  RESULT_VARIABLE ninja_result)
if (ninja_result)
  message(WARNING "Regeneration failed running ninja: ${ninja_result}")
endif()
include("${SRC_SKIA}/cmake/CMakeLists.ext")
